---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import Layout from '@/layouts/Layout.astro'
import { Icon } from 'astro-icon/components'
import { SITE } from '@/consts'

// Calcular experiencia automáticamente
const startDate = new Date('2024-06-01') 
const today = new Date() 
const monthsExperience = (today.getFullYear() - startDate.getFullYear()) * 12 + (today.getMonth() - startDate.getMonth())
const yearsExperience = (monthsExperience / 12).toFixed(1)

// Person Schema for About page
const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Joan Matías",
  "url": SITE.href,
  "image": "https://avatars.githubusercontent.com/u/229201137",
  "description": SITE.description,
  "jobTitle": "Desarrollador Web",
  "knowsAbout": ["Desarrollo Web", "React", "TypeScript", "Next.js"]
}
---
<Layout class="max-w-3xl">
  <PageHead slot="head" title="Sobre Mí | Joan Matías" />
  
  <script type="application/ld+json" set:html={JSON.stringify(personSchema)} />
  
  <Breadcrumbs items={[{ label: 'Sobre Mí', icon: 'lucide:user' }]} />

  <section class="flex flex-col gap-8">
    <!-- Header con foto -->
    <div class="flex flex-col sm:flex-row sm:items-center gap-6">
      <div class="flex-shrink-0">
        <img 
          src="https://github.com/joanmat117.png" 
          alt="Joan Matías - Desarrollador Web"
          width="120"
          height="120"
          class="rounded-full border-4 border-border shadow-lg"
        />
      </div>
      <div class="flex-1">
        <h1 class="text-3xl md:text-4xl font-bold">Hola, soy Joan Matías</h1>
        <p class="text-sm text-muted-foreground font-mono mt-1">
          Desarrollador web · {yearsExperience} años creando para internet
        </p>
      </div>
    </div>

    <!-- Contenido principal -->
    <div class="space-y-8">
      <!-- Introducción -->
      <div class="space-y-4">
        <p class="text-foreground leading-relaxed">
          Llevo más de {yearsExperience} años construyendo cosas para la web, y lo que más me motiva es transformar ideas en experiencias digitales que la gente disfrute usar.
        </p>
        
        <p class="text-muted-foreground leading-relaxed">
          Me obsesiona encontrar ese punto donde la tecnología se siente mágica pero nunca complicada. Creo que si algo no es fácil de usar, por pequeño que sea, hay que repensarlo.
        </p>
      </div>

      <!-- Mi enfoque -->
      <div class="space-y-4 pt-6 border-t border-border">
        <h2 class="text-xl font-semibold text-foreground mb-3">Mi enfoque</h2>
        
        <p class="text-muted-foreground leading-relaxed">
          Empecé con proyectos pequeños que me enseñaron que lo más difícil no es hacer que algo funcione, sino hacer que funcione bien para los demás. Desde entonces, me mueve una idea simple: la web debería ser accesible para todos, no solo técnicamente, sino en cómo se siente usarla.
        </p>
        
        <p class="text-muted-foreground leading-relaxed">
          Por eso valoro tanto los detalles: la velocidad de carga, lo intuitivo de la navegación, cómo se siente la interacción en móvil. Son esas pequeñas cosas las que marcan la diferencia entre algo que funciona y algo que se disfruta.
        </p>
      </div>

      <!-- Principios -->
      <div class="space-y-3 pt-6 border-t border-border">
        <h2 class="text-xl font-semibold text-foreground mb-3">Algunos principios que sigo</h2>
        
        <ul class="space-y-3 text-muted-foreground">
          <li class="flex items-start gap-3">
            <Icon name="lucide:code" class="text-primary mt-0.5 flex-shrink-0" />
            <span><strong class="text-foreground">Código claro sobre código listo</strong> — prefiero soluciones entendibles que funcionen mañana</span>
          </li>
          <li class="flex items-start gap-3">
            <Icon name="lucide:zap" class="text-primary mt-0.5 flex-shrink-0" />
            <span><strong class="text-foreground">La velocidad es respeto</strong> — mejorar performance no es opcional, es considerar el tiempo del usuario</span>
          </li>
          <li class="flex items-start gap-3">
            <Icon name="lucide:book-open" class="text-primary mt-0.5 flex-shrink-0" />
            <span><strong class="text-foreground">Aprender compartiendo</strong> — lo que descubro solo sirve si lo comparto con otros</span>
          </li>
        </ul>
      </div>

      <!-- El blog -->
      <div class="space-y-4 pt-6 border-t border-border">
        <h2 class="text-xl font-semibold text-foreground mb-3">Sobre este blog</h2>
        
        <p class="text-muted-foreground leading-relaxed">
          Aquí comparto lo que voy aprendiendo: desde soluciones técnicas que me resolvieron problemas hasta reflexiones sobre desarrollo web. No pretendo ser la fuente definitiva de nada, solo contar mi experiencia por si a alguien le resulta útil.
        </p>
        
        <p class="text-muted-foreground leading-relaxed text-sm">
          Si con algo de lo que escribo puedo ahorrarle a otro desarrollador el mismo dolor de cabeza que yo pasé, ya me doy por satisfecho.
        </p>
      </div>

      <!-- Contacto -->
      <div class="bg-muted/30 p-6 rounded-xl border border-border mt-8">
        <div class="space-y-4">
          <h3 class="font-semibold text-foreground text-lg">¿Trabajamos juntos?</h3>
          
          <p class="text-muted-foreground">
            Si buscas a alguien que combine habilidades técnicas con atención al detalle y un enfoque centrado en el usuario, me encantaría conversar sobre tu proyecto.
          </p>
          
          <div class="flex flex-col sm:flex-row gap-3 pt-2">
            <a 
              href="mailto:joanmat@proton.me" 
              class="inline-flex items-center justify-center gap-2 bg-primary text-primary-foreground px-5 py-3 rounded-lg no-underline text-sm font-medium hover:bg-primary/90 transition-colors"
            >
              <Icon name="lucide:mail" />
              Enviar email
            </a>
            <a 
              href="/blog" 
              class="inline-flex items-center justify-center gap-2 border border-input bg-background px-5 py-3 rounded-lg text-sm font-medium hover:bg-accent hover:text-accent-foreground transition-colors"
            >
              <Icon name="lucide:newspaper" />
              Leer el blog
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Experiencia dinámica
    const start = new Date('2024-06-01')
    const now = new Date()
    const months = (now.getFullYear() - start.getFullYear()) * 12 + (now.getMonth() - start.getMonth())
    const years = (months / 12).toFixed(1)
    
    document.querySelectorAll('[data-experience]').forEach(el => {
      el.textContent = years
    })
  </script>
</Layout>
