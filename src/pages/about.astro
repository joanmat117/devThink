---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import Layout from '@/layouts/Layout.astro'
import { Icon } from 'astro-icon/components'
import { SITE } from '@/consts'

// Calcular experiencia automáticamente
const startDate = new Date('2024-06-01') 
const today = new Date() 
const monthsExperience = (today.getFullYear() - startDate.getFullYear()) * 12 + (today.getMonth() - startDate.getMonth())
const yearsExperience = (monthsExperience / 12).toFixed(1)

// Person Schema for About page
const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Joan",
  "url": SITE.href,
  "image": "https://avatars.githubusercontent.com/u/229201137",
  "description": SITE.description,
  "jobTitle": "Desarrollador Web",
  "knowsAbout": ["Desarrollo Web", "React", "TypeScript", "Next.js", "Experiencias Digitales"]
}
---
<Layout class="max-w-3xl">
  <PageHead slot="head" title="Sobre Mí - Joan Matias" />
  
  <!-- Person Schema for About page SEO -->
  <script type="application/ld+json" set:html={JSON.stringify(personSchema)} />
  
  <Breadcrumbs items={[{ label: 'Sobre Mí', icon: 'lucide:user' }]} />

  <section class="flex flex-col gap-8">
    <!-- Header con foto -->
    <div class="flex flex-col sm:flex-row sm:items-center gap-6">
      <div class="flex-shrink-0">
        <img 
          src="https://github.com/joanmat117.png" 
          alt="Foto de perfil de Joan"
          width="120"
          height="120"
          class="rounded-full border-4 border-border shadow-lg"
        />
      </div>
      <div class="flex-1">
        <h1 class="text-3xl md:text-4xl font-bold">Hola, soy Joan</h1>
        <p class="text-sm text-muted-foreground font-mono mt-1">
          Desarrollador web · {yearsExperience} años creando cosas para internet
        </p>
      </div>
    </div>

    <!-- Main Content -->
    <div class="prose prose-sm dark:prose-invert max-w-none space-y-8">
      <!-- Introducción -->
      <div class="space-y-4">
        <p class="text-foreground leading-relaxed">
          Llevo más de {yearsExperience} años metido en esto de construir cosas para la web, y cada día me sorprende lo mucho que queda por aprender. Me encanta transformar ideas en experiencias digitales que la gente disfrute usar.
        </p>
        
        <p class="text-muted-foreground leading-relaxed">
          Si tuviera que resumir mi enfoque, diría que me obsesiona encontrar ese punto donde la tecnología se siente mágica pero nunca complicada. Me da igual si es un botón, un formulario o toda una aplicación: si no es fácil de usar, hay que repensarlo.
        </p>
      </div>

      <!-- Mi camino -->
      <div class="space-y-4">
        <h2 class="text-xl font-semibold text-foreground pt-4 border-t border-border">Cómo llegué hasta aquí</h2>
        
        <p class="text-muted-foreground leading-relaxed">
          Empecé como muchos: con proyectos pequeños que me enseñaron que lo más difícil no es hacer que algo funcione, sino hacer que funcione bien para los demás. Esa primera frustración de ver a alguien perderse en una interfaz que yo creía obvia cambió mi manera de ver todo.
        </p>
        
        <p class="text-muted-foreground leading-relaxed">
          Desde entonces, me mueve una idea simple: la web debería ser accesible para todos. No solo técnicamente, sino en cómo se siente usarla. Por eso paso tanto tiempo pensando en detalles que muchos pasan por alto: la velocidad con la que carga una página, lo intuitivo que es encontrar lo que buscas, o cómo se siente la interacción en el móvil.
        </p>
      </div>

      <!-- Lo que me importa -->
      <div class="space-y-4">
        <h2 class="text-xl font-semibold text-foreground pt-4 border-t border-border">Lo que de verdad me importa</h2>
        
        <p class="text-muted-foreground leading-relaxed">
          <strong class="text-foreground">El código que escribo hoy debe entenderse mañana</strong> — ya sea por mí o por alguien más. Por eso prefiero soluciones claras antes que trucos ingeniosos que nadie entiende.
        </p>
        
        <p class="text-muted-foreground leading-relaxed">
          <strong class="text-foreground">La velocidad no es un extra, es parte fundamental</strong> — si una web tarda en cargar, ya empezamos mal. Mejorar performance no es optimización prematura, es respeto por el tiempo de la gente.
        </p>
        
        <p class="text-muted-foreground leading-relaxed">
          <strong class="text-foreground">Aprender en público vale la pena</strong> — los errores que comparto aquí probablemente ayuden a alguien más a no tropezar con lo mismo. Y las cosas que descubro, si las guardo solo para mí, no sirven de mucho.
        </p>
        
        <p class="text-muted-foreground leading-relaxed">
          <strong class="text-foreground">Las herramientas cambian, los principios no</strong> — hoy uso React y Next.js, mañana quién sabe. Lo que queda es entender por qué ciertas decisiones técnicas funcionan y otras no.
        </p>
      </div>

      <!-- Objetivo del blog -->
      <div class="space-y-4">
        <h2 class="text-xl font-semibold text-foreground pt-4 border-t border-border">Y este blog, ¿de qué va?</h2>
        
        <p class="text-muted-foreground leading-relaxed">
          Este es el rincón donde desempolvo lo que voy aprendiendo. A veces son notas técnicas sobre algo que me tuvo atascado horas, otras son reflexiones sobre tendencias del desarrollo web, y de vez en cuando simplemente comparto herramientas o recursos que me han salvado la vida.
        </p>
        
        <p class="text-muted-foreground leading-relaxed">
          No pretendo ser la fuente definitiva de nada, solo contar mi experiencia por si a alguien le resulta útil. Si con algo de lo que escribo puedo ahorrarle a otro desarrollador el dolor de cabeza que yo pasé, ya me doy por satisfecho.
        </p>
      </div>

      <!-- CTA más natural -->
      <div class="bg-muted/40 p-6 rounded-xl border border-border mt-8">
        <div class="space-y-4">
          <h3 class="font-semibold text-foreground text-lg">¿Quieres charlar sobre algún proyecto?</h3>
          
          <p class="text-muted-foreground">
            Si estás buscando a alguien que se tome en serio crear experiencias web que funcionen de verdad (y no solo en el ordenador del desarrollador), me encantaría escucharte.
          </p>
          
          <p class="text-muted-foreground text-sm">
            También puedes echar un vistazo a <a href="/blog" class="text-primary hover:underline">lo que escribo</a> para hacerte una idea de cómo pienso.
          </p>
          
          <div class="pt-2">
            <a 
              href="mailto:joanmat@proton.me" 
              class="inline-flex items-center gap-2 bg-primary text-primary-foreground px-5 py-2.5 rounded-lg no-underline text-sm font-medium hover:bg-primary/90 transition-colors whitespace-nowrap"
            >
              <Icon name="lucide:message-circle" />
              Escribirme
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Script para calcular experiencia dinámicamente (cliente) -->
  <script>
    function calculateExperience() {
      const start = new Date('2024-06-01')
      const today = new Date()
      const months = (today.getFullYear() - start.getFullYear()) * 12 + (today.getMonth() - start.getMonth())
      const years = (months / 12).toFixed(1)
      
      // Actualizar en todos los lugares donde aparece
      document.querySelectorAll('[data-experience]').forEach(el => {
        el.textContent = years
      })
    }
    
    // Ejecutar al cargar y actualizar cada año
    calculateExperience()
    setInterval(calculateExperience, 1000 * 60 * 60 * 24 * 365) // Cada año
  </script>
</Layout>
